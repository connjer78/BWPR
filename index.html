<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
        var TRELLO_APP_KEY = '18f0d2661292b35d137bdaa4013eb249';

        window.TrelloPowerUp.initialize({
            'card-buttons': function(t, options) {
                return [{
                    icon: 'https://connjer78.github.io/BWPR/assets/rocketship.PNG',
                    text: 'Sprint It!',
                    callback: function(t) {
                        return t.getRestApi()
                            .isAuthorized()
                            .then(function(isAuthorized) {
                                if (isAuthorized) {
                                    return t.popup({
                                        title: "Create Sprint Cards",
                                        url: './popup.html',
                                        height: 300
                                    });
                                } else {
                                    return t.popup({
                                        title: 'Authorize Sprint Cards Power-Up',
                                        url: './authorize.html',
                                        height: 140,
                                    });
                                }
                            });
                    }
                }];
            },
            'authorization-status': function(t, options){
                return t.get('member', 'private', 'authToken')
                .then(function(authToken) {
                    return { authorized: authToken != null };
                });
            },
            'show-authorization': function(t, options){
                return t.popup({
                    title: 'Authorize Sprint Cards Power-Up',
                    url: './authorize.html',
                    height: 140,
                });
            }
        }, {
            appKey: TRELLO_APP_KEY,
            appName: 'Sprint Cards Power-Up'
        });
    </script>
</body>
</html>

